# c3_cafeteria
C3学食班の開発用レポジトリです．GitHubを使用して共同開発していきましょう！

## 🖋️用語の説明
- **リポジトリ**：プロジェクトのフォルダ全体。Gitが管理している作業場所。
- **ブランチ**：作業用の枝。`main` を壊さずにそれぞれ自由に開発できる。
- **コミット**：作業の保存。どんな変更をしたか履歴に残る。コミットコメントを追加することで、どんな変更をしたのかが分かりやすい。
- **ステージ（add）**：コミットするファイルを一時的に準備すること。
- **プッシュ（push）**：自分の変更をGitHubにアップロードすること。
- **プル（pull）**：他の人の変更を取り込む操作。
- **プルリクエスト（PR）**：ブランチでの変更を `main` に反映してもらう申請。
- **マージ**：ブランチ同士の変更を統合すること。
- **コンフリクト**：同じところを別々に編集したときの衝突。手動での解決が必要。

**ローカルレポジトリ** : 自分のPC内にある \
**リモートレポジトリ** : サーバーなどのネットワーク上にある
  基本的にローカルレポジトリで作業を行い、その作業内容をリモートレポジトリにプッシュ（アップロード）する流れで行う。プッシュまですると、共同開発者は変更点が確認できる。

## ⚙️app.pyの実行方法
提供された `app.py`ファイルに基づいて、必要なライブラリをインストールしたPython環境が必要です。仮想環境をセットアップし、必要なパッケージをインストールする方法は以下の通りです。  
### 仮想環境の作成
- ターミナルまたはコマンドプロンプトをひらく。
- プロジェクトディレクトリに移動する。（`app.py`, `index.html`, `define_seats_web.html`, `seats_config.json` ファイルがある場所）
- 仮想環境を作成する。
  ~~~
  python -m venv venv
  ~~~

### 仮想環境のアクティベート
**プロジェクトで作業するたび**に、仮想環境をアクティベートする必要があります。  
windowsの場合  
~~~
.\venv\Scripts\activate
~~~
macの場合  
~~~
source venv/bin/activate
~~~
仮想環境がアクティベートされると、ターミナルプロンプトが変更され、仮想環境ないにいることを示します。（例：`(venv) youe_username@your_computer:~/your_project`）  

### 依存関係のインストール  
次に、`app.py`の実行に必要なPythonライブラリをインストールします。  
~~~
pip install opencv-python numpy ultralytics Flask
~~~

### YOLOモデルのダウンロード（まだなら）  
YOLOv8モデルファイルをダウンロードし、`yolo11n.pt`に名前を変更するか、`app.py`の`model = YOLO("yolo11n.pt")`の行を`model = YOLO("yolo8n.pt")`に変更する。  
`yolo11n.pt`（または`yolov8n.pt`)を`app.py`ファイルと同じディレクトリに配置する。  

#### 上記の手順を実行したら、Flaskアプリケーションを実行できます。
ターミナルでアクティブ化された仮想環境から、  
~~~
python app.py
~~~
Flaskアプリが実行されていることを示す出力が表示されるはずです。通常、`http://0.0.0.0:5000`または`http://127.0.0.1:5000`で実行されます。


## 🚀共同開発の手順
### 最初に一度だけ行うこと
**1. gitをインストールする**  
   バージョンを確認して、gitのバージョン情報が出力されればOK
   ~~~
   git --version
   ~~~
   
**2. このレポジトリをクローンする**
   ~~~
   git clone https://github.com/Nah628/c3_cafeteria.git
   ~~~
   
**3. ユーザー情報の登録**
   ~~~
   git config --global user.name "自分の名前"
   git config --global user.email "自分のメールアドレス"
   ~~~

### 通常の開発フロー
**1. 最新の状態を取得**
   ~~~
   git pull origin main
   ~~~
   
**2. 作業用ブランチを作成**
   ~~~
   git checkout -b branch名
   ~~~
   例：`git checkout -b yohimura_test`
> [!WARNING]
>   `main`を直接触らない！
   
**3. ブランチ内でファイルを作成・編集**  
   VScode等で作成したファイルは、Gitで作業しているレポジトリのフォルダの中に保存する。
   
**4. 変更をステージしてコミット**  
   例えば、`hello.py`というファイルをコミットしたいなら
   ~~~
   git add hello.py
   git commit -m "Add hello.py"
   ~~~
  全ファイルまとめてステージも可能
  ~~~
  git add .
  ~~~
  ※c3_cafeteriaを現在のディレクトリにする必要あり
  ~~~
  cd c3_cafeteria
  ~~~
   `"Add hello.py"`の部分は、コミットコメント。他の共同開発開発者分かりやすいように、変更点や作業内容を書くもの。
   
**5. 自分のブランチをリモートにプッシュ**
   ~~~
   git push origin yoshimura_test
   ~~~
   
**6. GitHub上でPull Requestを作成**  
   `main`ブランチにマージするように申請
